<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <link rel="stylesheet" th:href="@{/css/base/nav.css}">
    <link rel="stylesheet" th:href="@{/css/reservation/reservation.css}">
    <!-- Flatpickr CSS -->
    <link rel="stylesheet" th:href="@{https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css}">
    <!-- Flatpickr JavaScript -->
    <script th:src="@{https://cdn.jsdelivr.net/npm/flatpickr}"></script>
    <!-- Flatpickr í•œêµ­ì–´ ì–¸ì–´íŒ© -->
    <script th:src="@{https://cdn.jsdelivr.net/npm/flatpickr/dist/l10n/ko.js}"></script>
</head>
<body>
    <div class="background-container">
        <!-- ì»¨í…ì¸  -->
    </div>
    <header>
        <nav>
            <!--ë„¤ë¹„ë°”-->
            <span onclick="location.href='/main'">WashPlan</span>
            <span style="color: #FFFF00;">ì˜ˆì•½</span>
            <span>FAQ</span>
            <span>íšŒì›ê°€ì…</span>
            <span>ë¡œê·¸ì¸</span>
        </nav>
    </header>

    <button class="wash" id="washButton">ì„¸íƒê¸°</button>
    <button class="dry" id="dryButton">ê±´ì¡°ê¸°</button>

    <span class="imtDate">ğŸ“†</span>
    <span class="imtTime">â³</span>




    <div class="washReserve" id="washReserve">
<!--        <span class="reserveDate">ì˜ˆì•…ë‚ ì§œ</span>-->
        <div class="reserveTime">
            <input id="washDatetimePicker" type="text" class="datetime-picker" placeholder="ì‹œê°„ ì„ íƒ">
        </div>
        <p id="washTimeRangeDisplay" class="time-range-display"></p>


        <span class="machine">ê¸°ê¸°</span>
        <span class="curent">í˜„í™©</span>
        <span class="option">ì˜µì…˜</span>
        <span class="price">ê°€ê²©</span>
        <span class="reserve">ì˜ˆì•½</span>
        <hr>
        <img class="washimage" th:src="@{/images/reservation/wash.png}" alt="ì„¸íƒê¸°">
        <span class="í˜¸101">ì„¸íƒê¸° - <span th:text="${machineNo101}"></span>í˜¸</span>
        <div class="situation"><span>ì‚¬ìš©ê°€ëŠ¥</span></div>
        <div class="dropdown-container">
            <label for="washing-options" class="dropdown-label">ì„¸íƒ ì˜µì…˜</label>
            <select id="washing-options" class="dropdown" data-id="1">
                <option value="í‘œì¤€ì„¸íƒ" data-price="5,000">í‘œì¤€ì„¸íƒ (30ë¶„)</option>
                <option value="ì¹¨êµ¬ì„¸íƒ" data-price="6,000">ì¹¨êµ¬ì„¸íƒ (40ë¶„)</option>
            </select>
        </div>
        <div id="selected-option" class="result">
            5,000ì›
        </div>
        <button class="reservebtn" id="reserveButton">ì˜ˆì•½í•˜ê¸°</button>

        <!-- ëª¨ë‹¬ì°½ -->
        <div id="modal" class="modal">
            <div class="modal-content" id="modal-content">
                <p class="modal-text">
                    "ì˜ˆì•½ëœ ì‹œê°„ìœ¼ë¡œë¶€í„° 10ë¶„ ì´ë‚´ì— ì´ìš©ì„ ì‹œì‘í•˜ì§€ ì•Šì„ ê²½ìš°, <br>ì˜ˆì•½ì´ ìë™ ì·¨ì†Œë©ë‹ˆë‹¤.<br>
                    ìë™ ì·¨ì†Œê°€ 3íšŒ ë°œìƒí•  ê²½ìš°, ê³„ì •ì´ ì¼ì‹œ ì •ì§€ë©ë‹ˆë‹¤."<br><br>
                </p>
                <span class="reserveText">ìœ„ ë‚´ìš©ì„ í™•ì¸í•˜ì‹œê³  <span id="modalTimeDisplay" class="modal-time"></span> ì˜ˆì•½ì„ ì§„í–‰í•˜ì‹œê² ìŠµë‹ˆê¹Œ?</span>

                <button id="cancelButton" class="cancel">ì·¨ì†Œ</button>
                <button id="confirmButton" class="confirm">í™•ì¸</button>

            </div>
        </div>
        <div class="modal-content2" id="modal-content2">
            <span class="reserveConfirm">ì˜ˆì•½ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤ !</span>
            <button id="confirmButton2" class="confirm2">í™•ì¸</button>
        </div>


        <img class="washimage2" th:src="@{/images/reservation/wash.png}" alt="ì„¸íƒê¸°">
        <span class="í˜¸102">ì„¸íƒê¸° - <span th:text="${machineNo102}"></span>í˜¸</span>
        <div class="situation2"><span>ì‚¬ìš©ê°€ëŠ¥</span></div>
        <div class="dropdown-container2">
            <label for="washing-options" class="dropdown-label">ì„¸íƒ ì˜µì…˜</label>
            <select id="washing-options2" class="dropdown" data-id="2">
                <option value="í‘œì¤€ì„¸íƒ" data-price="5,000">í‘œì¤€ì„¸íƒ (30ë¶„)</option>
                <option value="ì¹¨êµ¬ì„¸íƒ" data-price="6,000">ì¹¨êµ¬ì„¸íƒ (40ë¶„)</option>
            </select>
        </div>
        <div id="selected-option2" class="result2">
            5,000ì›
        </div>
        <button class="reservebtn2" id="reserveButton2">ì˜ˆì•½í•˜ê¸°</button>

        <!-- ëª¨ë‹¬ì°½ -->
        <div id="modal2" class="modal">
            <div class="modal-content" id="modal-content3">
                <p class="modal-text">
                    "ì˜ˆì•½ëœ ì‹œê°„ìœ¼ë¡œë¶€í„° 10ë¶„ ì´ë‚´ì— ì´ìš©ì„ ì‹œì‘í•˜ì§€ ì•Šì„ ê²½ìš°, <br>ì˜ˆì•½ì´ ìë™ ì·¨ì†Œë©ë‹ˆë‹¤.<br>
                    ìë™ ì·¨ì†Œê°€ 3íšŒ ë°œìƒí•  ê²½ìš°, ê³„ì •ì´ ì¼ì‹œ ì •ì§€ë©ë‹ˆë‹¤."<br><br>
                </p>
                <span class="reserveText">ìœ„ ë‚´ìš©ì„ í™•ì¸í•˜ì‹œê³  <span id="modalTimeDisplay2" class="modal-time"></span> ì˜ˆì•½ì„ ì§„í–‰í•˜ì‹œê² ìŠµë‹ˆê¹Œ?</span>

                <button id="cancelButton2" class="cancel">ì·¨ì†Œ</button>
                <button id="confirmButton3" class="confirm">í™•ì¸</button>

            </div>
        </div>
        <div class="modal-content2" id="modal-content4">
            <span class="reserveConfirm">ì˜ˆì•½ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤ !</span>
            <button id="confirmButton4" class="confirm2">í™•ì¸</button>
        </div>



        <img class="washimage3" th:src="@{/images/reservation/wash.png}" alt="ì„¸íƒê¸°">
        <span class="í˜¸103">ì„¸íƒê¸° - <span th:text="${machineNo103}"></span>í˜¸</span>
        <div class="situation3"><span>ì‚¬ìš©ê°€ëŠ¥</span></div>
        <div class="dropdown-container3">
            <label for="washing-options" class="dropdown-label" data-id="3">ì„¸íƒ ì˜µì…˜</label>
            <select id="washing-options3" class="dropdown">
                <option value="í‘œì¤€ì„¸íƒ" data-price="5,000">í‘œì¤€ì„¸íƒ (30ë¶„)</option>
                <option value="ì¹¨êµ¬ì„¸íƒ" data-price="6,000">ì¹¨êµ¬ì„¸íƒ (40ë¶„)</option>
            </select>
        </div>
        <div id="selected-option3" class="result3">
            5,000ì›
        </div>
        <button class="reservebtn3" id="reserveButton3">ì˜ˆì•½í•˜ê¸°</button>

        <!-- ëª¨ë‹¬ì°½ -->
        <div id="modal3" class="modal">
            <div class="modal-content" id="modal-content5">
                <p class="modal-text">
                    "ì˜ˆì•½ëœ ì‹œê°„ìœ¼ë¡œë¶€í„° 10ë¶„ ì´ë‚´ì— ì´ìš©ì„ ì‹œì‘í•˜ì§€ ì•Šì„ ê²½ìš°, <br>ì˜ˆì•½ì´ ìë™ ì·¨ì†Œë©ë‹ˆë‹¤.<br>
                    ìë™ ì·¨ì†Œê°€ 3íšŒ ë°œìƒí•  ê²½ìš°, ê³„ì •ì´ ì¼ì‹œ ì •ì§€ë©ë‹ˆë‹¤."<br><br>
                </p>
                <span class="reserveText">ìœ„ ë‚´ìš©ì„ í™•ì¸í•˜ì‹œê³  <span id="modalTimeDisplay3" class="modal-time"></span> ì˜ˆì•½ì„ ì§„í–‰í•˜ì‹œê² ìŠµë‹ˆê¹Œ?</span>

                <button id="cancelButton3" class="cancel">ì·¨ì†Œ</button>
                <button id="confirmButton5" class="confirm">í™•ì¸</button>

            </div>
        </div>
        <div class="modal-content2" id="modal-content6">
            <span class="reserveConfirm">ì˜ˆì•½ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤ !</span>
            <button id="confirmButton6" class="confirm2">í™•ì¸</button>
        </div>
    </div>



    <div class="dryReserve" id="dryReserve">

        <div class="reserveTime">
            <input id="dryDatetimePicker" type="text" class="datetime-picker" placeholder="ì‹œê°„ ì„ íƒ">

        </div>
        <p id="dryTimeRangeDisplay" class="time-range-display"></p>




        <span class="machine">ê¸°ê¸°</span>
        <span class="curent">í˜„í™©</span>
        <span class="option">ì˜µì…˜</span>
        <span class="price">ê°€ê²©</span>
        <span class="reserve">ì˜ˆì•½</span>
        <hr>
        <img class="dryimage" th:src="@{/images/reservation/dry.png}" alt="ê±´ì¡°ê¸°">
        <span class="í˜¸201">ê±´ì¡°ê¸° - <span th:text="${machineNo201}"></span>í˜¸</span>
        <div class="dry-situation"><span>ì‚¬ìš©ê°€ëŠ¥</span></div>
        <div class="dry-dropdown-container">
            <label for="washing-options" class="dropdown-label">ì„¸íƒ ì˜µì…˜</label>
            <select id="drying-options" class="dropdown" data-id="4">
                <option value="í‘œì¤€ê±´ì¡°" data-price="4,000">í‘œì¤€ê±´ì¡° (40ë¶„)</option>
                <option value="ì†ŒëŸ‰ê±´ì¡°" data-price="3,000">ì†ŒëŸ‰ê±´ì¡° (30ë¶„)</option>
            </select>
        </div>
        <div id="dry-selected-option" class="dry-result">
            4,000ì›
        </div>
        <button class="dry-reservebtn" id="reserveButton4">ì˜ˆì•½í•˜ê¸°</button>

        <!-- ëª¨ë‹¬ì°½ -->
        <div id="modal4" class="modal">
            <div class="modal-content" id="modal-content7">
                <p class="modal-text">
                    "ì˜ˆì•½ëœ ì‹œê°„ìœ¼ë¡œë¶€í„° 10ë¶„ ì´ë‚´ì— ì´ìš©ì„ ì‹œì‘í•˜ì§€ ì•Šì„ ê²½ìš°, <br>ì˜ˆì•½ì´ ìë™ ì·¨ì†Œë©ë‹ˆë‹¤.<br>
                    ìë™ ì·¨ì†Œê°€ 3íšŒ ë°œìƒí•  ê²½ìš°, ê³„ì •ì´ ì¼ì‹œ ì •ì§€ë©ë‹ˆë‹¤."<br><br>
                </p>
                <span class="reserveText">ìœ„ ë‚´ìš©ì„ í™•ì¸í•˜ì‹œê³  <span id="modalTimeDisplay4" class="modal-time"></span> ì˜ˆì•½ì„ ì§„í–‰í•˜ì‹œê² ìŠµë‹ˆê¹Œ?</span>

                <button id="cancelButton4" class="cancel">ì·¨ì†Œ</button>
                <button id="confirmButton7" class="confirm">í™•ì¸</button>

            </div>
        </div>
        <div class="modal-content2" id="modal-content8">
            <span class="reserveConfirm">ì˜ˆì•½ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤ !</span>
            <button id="confirmButton8" class="confirm2">í™•ì¸</button>
        </div>


        <img class="dryimage2" th:src="@{/images/reservation/dry.png}" alt="ê±´ì¡°ê¸°">
        <span class="í˜¸202">ê±´ì¡°ê¸° - <span th:text="${machineNo202}"></span>í˜¸</span>
        <div class="dry-situation2"><span>ì‚¬ìš©ê°€ëŠ¥</span></div>
        <div class="dry-dropdown-container2">
            <label for="washing-options" class="dropdown-label">ì„¸íƒ ì˜µì…˜</label>
            <select id="drying-options2" class="dropdown" data-id="5">
                <option value="í‘œì¤€ê±´ì¡°" data-price="4,000">í‘œì¤€ê±´ì¡° (40ë¶„)</option>
                <option value="ì†ŒëŸ‰ê±´ì¡°" data-price="3,000">ì†ŒëŸ‰ê±´ì¡° (30ë¶„)</option>
            </select>
        </div>
        <div id="dry-selected-option2" class="dry-result2">
            4,000ì›
        </div>
        <button class="dry-reservebtn2" id="reserveButton5">ì˜ˆì•½í•˜ê¸°</button>

        <!-- ëª¨ë‹¬ì°½ -->
        <div id="modal5" class="modal">
            <div class="modal-content" id="modal-content9">
                <p class="modal-text">
                    "ì˜ˆì•½ëœ ì‹œê°„ìœ¼ë¡œë¶€í„° 10ë¶„ ì´ë‚´ì— ì´ìš©ì„ ì‹œì‘í•˜ì§€ ì•Šì„ ê²½ìš°, <br>ì˜ˆì•½ì´ ìë™ ì·¨ì†Œë©ë‹ˆë‹¤.<br>
                    ìë™ ì·¨ì†Œê°€ 3íšŒ ë°œìƒí•  ê²½ìš°, ê³„ì •ì´ ì¼ì‹œ ì •ì§€ë©ë‹ˆë‹¤."<br><br>
                </p>
                <span class="reserveText">ìœ„ ë‚´ìš©ì„ í™•ì¸í•˜ì‹œê³  <span id="modalTimeDisplay5" class="modal-time"></span> ì˜ˆì•½ì„ ì§„í–‰í•˜ì‹œê² ìŠµë‹ˆê¹Œ?</span>

                <button id="cancelButton5" class="cancel">ì·¨ì†Œ</button>
                <button id="confirmButton9" class="confirm">í™•ì¸</button>

            </div>
        </div>
        <div class="modal-content2" id="modal-content10">
            <span class="reserveConfirm">ì˜ˆì•½ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤ !</span>
            <button id="confirmButton10" class="confirm2">í™•ì¸</button>
        </div>

        <img class="dryimage3" th:src="@{/images/reservation/dry.png}" alt="ê±´ì¡°ê¸°">
        <span class="í˜¸203">ê±´ì¡°ê¸° - <span th:text="${machineNo203}"></span>í˜¸</span>
        <div class="dry-situation3"><span>ì‚¬ìš©ê°€ëŠ¥</span></div>
        <div class="dry-dropdown-container3">
            <label for="washing-options" class="dropdown-label">ì„¸íƒ ì˜µì…˜</label>
            <select id="drying-options3" class="dropdown" data-id="6">
                <option value="í‘œì¤€ê±´ì¡°" data-price="4,000">í‘œì¤€ê±´ì¡° (40ë¶„)</option>
                <option value="ì†ŒëŸ‰ê±´ì¡°" data-price="3,000">ì†ŒëŸ‰ê±´ì¡° (30ë¶„)</option>
            </select>
        </div>
        <div id="dry-selected-option3" class="dry-result3">
            4,000ì›
        </div>
        <button class="dry-reservebtn3" id="reserveButton6">ì˜ˆì•½í•˜ê¸°</button>


        <!-- ëª¨ë‹¬ì°½ -->
        <div id="modal6" class="modal">
            <div class="modal-content" id="modal-content11">
                <p class="modal-text">
                    "ì˜ˆì•½ëœ ì‹œê°„ìœ¼ë¡œë¶€í„° 10ë¶„ ì´ë‚´ì— ì´ìš©ì„ ì‹œì‘í•˜ì§€ ì•Šì„ ê²½ìš°, <br>ì˜ˆì•½ì´ ìë™ ì·¨ì†Œë©ë‹ˆë‹¤.<br>
                    ìë™ ì·¨ì†Œê°€ 3íšŒ ë°œìƒí•  ê²½ìš°, ê³„ì •ì´ ì¼ì‹œ ì •ì§€ë©ë‹ˆë‹¤."<br><br>
                </p>
                <span class="reserveText">ìœ„ ë‚´ìš©ì„ í™•ì¸í•˜ì‹œê³  <span id="modalTimeDisplay6" class="modal-time"></span> ì˜ˆì•½ì„ ì§„í–‰í•˜ì‹œê² ìŠµë‹ˆê¹Œ?</span>

                <button id="cancelButton6" class="cancel">ì·¨ì†Œ</button>
                <button id="confirmButton11" class="confirm">í™•ì¸</button>

            </div>
        </div>
        <div class="modal-content2" id="modal-content12">
            <span class="reserveConfirm">ì˜ˆì•½ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤ !</span>
            <button id="confirmButton12" class="confirm2">í™•ì¸</button>
        </div>
    </div>

    <footer>
        <span>ğŸ“031-123-4567ã…£âœ‰ï¸contact@washplan.com</span>
        <span>ğŸš©ê²½ê¸° í•˜ë‚¨ì‹œ ë¯¸ì‚¬ê°•ë³€ë™ë¡œ 85 íìŠ¤í…Œì´íŠ¸ ì—ì½” 3ì¸µ</span>
        <span>â“’ 2024 PPal-Ajoã…£All rights reserved.Designed for your convenience.</span>
    </footer>

<script>
    document.addEventListener("DOMContentLoaded", function () {
        const washButton = document.getElementById("washButton");
        const dryButton = document.getElementById("dryButton");
        const washReserve = document.getElementById("washReserve");
        const dryReserve = document.getElementById("dryReserve");
        const washTimeRangeDisplay = document.getElementById("washTimeRangeDisplay");
        const dryTimeRangeDisplay = document.getElementById("dryTimeRangeDisplay");




        // 10ë¶„ ë‹¨ìœ„ë¡œ ë°˜ì˜¬ë¦¼ëœ í˜„ì¬ ì‹œê°„ + 1ì‹œê°„ ê³„ì‚°
        function getDefaultStartTime() {
            const now = new Date();
            now.setMinutes(Math.ceil(now.getMinutes() / 10) * 10, 0, 0); // 10ë¶„ ë‹¨ìœ„ ë°˜ì˜¬ë¦¼
            now.setHours(now.getHours() + 1); // í˜„ì¬ ì‹œê°„ì—ì„œ 1ì‹œê°„ ë’¤
            return now;
        }

        function calculateAndFormatEndTime(startTime) {
            const endTime = new Date(startTime);
            endTime.setHours(endTime.getHours() + 1); // ì¢…ë£Œ ì‹œê°„ = ì‹œì‘ ì‹œê°„ + 1ì‹œê°„
            return `${String(endTime.getHours()).padStart(2, "0")}:${String(endTime.getMinutes()).padStart(2, "0")}`;
        }

        // ì‹œê°„ í˜•ì‹ í¬ë§·íŒ…
        function formatTime(date) {
            return `${String(date.getHours()).padStart(2, "0")}:${String(date.getMinutes()).padStart(2, "0")}`;
        }

        let washFlatpickr = null; // ì„¸íƒê¸° Flatpickr ì¸ìŠ¤í„´ìŠ¤ ì €ì¥
        let dryFlatpickr = null;  // ê±´ì¡°ê¸° Flatpickr ì¸ìŠ¤í„´ìŠ¤ ì €ì¥

        washReserve.style.display = "block";
        dryReserve.style.display = "none";
        washButton.classList.add("active");


        // ë²„íŠ¼ í™œì„±í™” ê´€ë¦¬
        washButton.addEventListener("click", () => {
            washReserve.style.display = "block";
            dryReserve.style.display = "none";

            washButton.classList.add("active");
            dryButton.classList.remove("active");

            // Flatpickr ì´ˆê¸°í™” ë˜ëŠ” ì¬ì„¤ì • (ì„¸íƒê¸°ìš©)
            if (!washFlatpickr) {
                initializeFlatpickr("#washDatetimePicker",washTimeRangeDisplay);
            }
        });

        dryButton.addEventListener("click", () => {
            washReserve.style.display = "none";
            dryReserve.style.display = "block";
            dryButton.classList.add("active");
            washButton.classList.remove("active");
            // Flatpickr ì´ˆê¸°í™” ë˜ëŠ” ì¬ì„¤ì • (ê±´ì¡°ê¸°ìš©)
            if (!dryFlatpickr) {
                initializeFlatpickr("#dryDatetimePicker",dryTimeRangeDisplay);
            }
        });



        // Flatpickr ì´ˆê¸°í™” í•¨ìˆ˜
        async function initializeFlatpickr(selector, displayElement) {

            const defaultStartTime = getDefaultStartTime();
            let minTime = `${String(defaultStartTime.getHours()).padStart(2, "0")}:${String(defaultStartTime.getMinutes()).padStart(2, "0")}`;
            const defaultEndTime = calculateAndFormatEndTime(defaultStartTime);

            // ì´ˆê¸° ì‹œê°„ í‘œì‹œ
            displayElement.textContent = `${formatTime(defaultStartTime)} ~ ${defaultEndTime}`;

            flatpickr(selector, {
                enableTime: true,
                dateFormat: "Y-m-d ã…£ H:i", // ë‚ ì§œ ë° ì‹œê°„ í¬ë§·
                time_24hr: true, // 24ì‹œê°„ í˜•ì‹ ì‚¬ìš©
                minuteIncrement: 10, // 10ë¶„ ë‹¨ìœ„ë¡œ ì‹œê°„ ì„ íƒ
                locale:"ko", // í•œêµ­ì–´ ì„¤ì •
                defaultDate: defaultStartTime, // ì‹œì‘ ì‹œê°„: í˜„ì¬ ì‹œê°„ + 1ì‹œê°„
                minDate: "today", // ì˜¤ëŠ˜ ì´í›„ì˜ ë‚ ì§œë§Œ ì„ íƒ ê°€ëŠ¥
                maxDate: new Date().fp_incr(7), // 7ì¼ í›„ê¹Œì§€ ì„ íƒ ê°€ëŠ¥
                minTime: minTime, // í˜„ì¬ ì‹œê°„ ê¸°ì¤€ 1ì‹œê°„ ë’¤ë¶€í„° ì„ íƒ ê°€ëŠ¥
                onChange: function (selectedDates, dateStr, instance) {
                    if (selectedDates.length > 0) {
                        const startTime = selectedDates[0]; // Date ê°ì²´
                        const formattedStartTime = formatTime(startTime); // í™”ë©´ì— í‘œì‹œí•  ì‹œì‘ ì‹œê°„
                        const endTime = calculateAndFormatEndTime(selectedDates[0]);

                        displayElement.textContent = `${formattedStartTime} ~ ${endTime}`;


                        const today = new Date();
                        const isToday = startTime.toDateString() === today.toDateString();
                        // ë‚ ì§œê°€ ì˜¤ëŠ˜ì¸ ê²½ìš°, í˜„ì¬ ì‹œê°„ + 1ì‹œê°„ ì´í›„ë§Œ ì„ íƒ ê°€ëŠ¥
                        if (isToday) {
                            minTime = `${String(today.getHours() + 1).padStart(2, "0")}:${String(
                                Math.ceil(today.getMinutes() / 10) * 10
                            ).padStart(2, "0")}`;
                        } else {
                            // ë‹¤ë¥¸ ë‚ ì§œì˜ ê²½ìš° 00:00ë¶€í„° ì„ íƒ ê°€ëŠ¥
                            minTime = "00:00";

                        }

                        instance.set("minTime", minTime);
                    }
                },
            });
        }

        // ì„¸íƒê¸°ì™€ ê±´ì¡°ê¸° Flatpickr ì´ˆê¸°í™”
        initializeFlatpickr("#washDatetimePicker", washTimeRangeDisplay);
        initializeFlatpickr("#dryDatetimePicker", dryTimeRangeDisplay);

    });


</script>

<script>
    document.addEventListener("DOMContentLoaded", function () {
        const dropdown = document.getElementById("washing-options");
        const resultDisplay = document.getElementById("selected-option");

        // ë“œë¡­ë‹¤ìš´ ê°’ì´ ë³€ê²½ë˜ì—ˆì„ ë•Œ ì‹¤í–‰
        dropdown.addEventListener("change", function () {
            const selectedText = dropdown.options[dropdown.selectedIndex].text; // ì„ íƒëœ ì˜µì…˜ì˜ í…ìŠ¤íŠ¸
            const selectedPrice = dropdown.options[dropdown.selectedIndex].getAttribute("data-price"); // data-priceì—ì„œ ê°€ê²© ê°€ì ¸ì˜¤ê¸°

            // ì„ íƒëœ ì˜µì…˜ê³¼ ê°€ê²©ì„ í™”ë©´ì— í‘œì‹œ
            resultDisplay.textContent = `${selectedPrice}ì›`;

            // ì¶”ê°€ë¡œ ì„ íƒëœ ê°’ì„ í™œìš©í•˜ë ¤ë©´ ì—¬ê¸°ì—ì„œ ì²˜ë¦¬
            console.log("ì„ íƒëœ ì˜µì…˜:", selectedText);
            console.log("ê°€ê²©:", selectedPrice);
        });
    });
</script>



<script>
    document.addEventListener("DOMContentLoaded", function () {
        const dropdown = document.getElementById("washing-options2");
        const resultDisplay = document.getElementById("selected-option2");

        // ë“œë¡­ë‹¤ìš´ ê°’ì´ ë³€ê²½ë˜ì—ˆì„ ë•Œ ì‹¤í–‰
        dropdown.addEventListener("change", function () {
            const selectedText = dropdown.options[dropdown.selectedIndex].text; // ì„ íƒëœ ì˜µì…˜ì˜ í…ìŠ¤íŠ¸
            const selectedPrice = dropdown.options[dropdown.selectedIndex].getAttribute("data-price"); // data-priceì—ì„œ ê°€ê²© ê°€ì ¸ì˜¤ê¸°

            // ì„ íƒëœ ì˜µì…˜ê³¼ ê°€ê²©ì„ í™”ë©´ì— í‘œì‹œ
            resultDisplay.textContent = `${selectedPrice}ì›`;

            // ì¶”ê°€ë¡œ ì„ íƒëœ ê°’ì„ í™œìš©í•˜ë ¤ë©´ ì—¬ê¸°ì—ì„œ ì²˜ë¦¬
            console.log("ì„ íƒëœ ì˜µì…˜:", selectedText);
            console.log("ê°€ê²©:", selectedPrice);
        });
    });
</script>

<script>
    document.addEventListener("DOMContentLoaded", function () {
        const dropdown = document.getElementById("washing-options3");
        const resultDisplay = document.getElementById("selected-option3");

        // ë“œë¡­ë‹¤ìš´ ê°’ì´ ë³€ê²½ë˜ì—ˆì„ ë•Œ ì‹¤í–‰
        dropdown.addEventListener("change", function () {
            const selectedText = dropdown.options[dropdown.selectedIndex].text; // ì„ íƒëœ ì˜µì…˜ì˜ í…ìŠ¤íŠ¸
            const selectedPrice = dropdown.options[dropdown.selectedIndex].getAttribute("data-price"); // data-priceì—ì„œ ê°€ê²© ê°€ì ¸ì˜¤ê¸°

            // ì„ íƒëœ ì˜µì…˜ê³¼ ê°€ê²©ì„ í™”ë©´ì— í‘œì‹œ
            resultDisplay.textContent = `${selectedPrice}ì›`;

            // ì¶”ê°€ë¡œ ì„ íƒëœ ê°’ì„ í™œìš©í•˜ë ¤ë©´ ì—¬ê¸°ì—ì„œ ì²˜ë¦¬
            console.log("ì„ íƒëœ ì˜µì…˜:", selectedText);
            console.log("ê°€ê²©:", selectedPrice);
        });
    });
</script>

<script>
    document.addEventListener("DOMContentLoaded", function () {
        const dropdown = document.getElementById("drying-options");
        const resultDisplay = document.getElementById("dry-selected-option");

        // ë“œë¡­ë‹¤ìš´ ê°’ì´ ë³€ê²½ë˜ì—ˆì„ ë•Œ ì‹¤í–‰
        dropdown.addEventListener("change", function () {
            const selectedText = dropdown.options[dropdown.selectedIndex].text; // ì„ íƒëœ ì˜µì…˜ì˜ í…ìŠ¤íŠ¸
            const selectedPrice = dropdown.options[dropdown.selectedIndex].getAttribute("data-price"); // data-priceì—ì„œ ê°€ê²© ê°€ì ¸ì˜¤ê¸°

            // ì„ íƒëœ ì˜µì…˜ê³¼ ê°€ê²©ì„ í™”ë©´ì— í‘œì‹œ
            resultDisplay.textContent = `${selectedPrice}ì›`;

            // ì¶”ê°€ë¡œ ì„ íƒëœ ê°’ì„ í™œìš©í•˜ë ¤ë©´ ì—¬ê¸°ì—ì„œ ì²˜ë¦¬
            console.log("ì„ íƒëœ ì˜µì…˜:", selectedText);
            console.log("ê°€ê²©:", selectedPrice);
        });
    });
</script>

    <script>
        document.addEventListener("DOMContentLoaded", function () {
            const dropdown = document.getElementById("drying-options2");
            const resultDisplay = document.getElementById("dry-selected-option2");

            // ë“œë¡­ë‹¤ìš´ ê°’ì´ ë³€ê²½ë˜ì—ˆì„ ë•Œ ì‹¤í–‰
            dropdown.addEventListener("change", function () {
                const selectedText = dropdown.options[dropdown.selectedIndex].text; // ì„ íƒëœ ì˜µì…˜ì˜ í…ìŠ¤íŠ¸
                const selectedPrice = dropdown.options[dropdown.selectedIndex].getAttribute("data-price"); // data-priceì—ì„œ ê°€ê²© ê°€ì ¸ì˜¤ê¸°

                // ì„ íƒëœ ì˜µì…˜ê³¼ ê°€ê²©ì„ í™”ë©´ì— í‘œì‹œ
                resultDisplay.textContent = `${selectedPrice}ì›`;

                // ì¶”ê°€ë¡œ ì„ íƒëœ ê°’ì„ í™œìš©í•˜ë ¤ë©´ ì—¬ê¸°ì—ì„œ ì²˜ë¦¬
                console.log("ì„ íƒëœ ì˜µì…˜:", selectedText);
                console.log("ê°€ê²©:", selectedPrice);
            });
        });
    </script>

    <script>
        document.addEventListener("DOMContentLoaded", function () {
            const dropdown = document.getElementById("drying-options3");
            const resultDisplay = document.getElementById("dry-selected-option3");

            // ë“œë¡­ë‹¤ìš´ ê°’ì´ ë³€ê²½ë˜ì—ˆì„ ë•Œ ì‹¤í–‰
            dropdown.addEventListener("change", function () {
                const selectedText = dropdown.options[dropdown.selectedIndex].text; // ì„ íƒëœ ì˜µì…˜ì˜ í…ìŠ¤íŠ¸
                const selectedPrice = dropdown.options[dropdown.selectedIndex].getAttribute("data-price"); // data-priceì—ì„œ ê°€ê²© ê°€ì ¸ì˜¤ê¸°

                // ì„ íƒëœ ì˜µì…˜ê³¼ ê°€ê²©ì„ í™”ë©´ì— í‘œì‹œ
                resultDisplay.textContent = `${selectedPrice}ì›`;

                // ì¶”ê°€ë¡œ ì„ íƒëœ ê°’ì„ í™œìš©í•˜ë ¤ë©´ ì—¬ê¸°ì—ì„œ ì²˜ë¦¬
                console.log("ì„ íƒëœ ì˜µì…˜:", selectedText);
                console.log("ê°€ê²©:", selectedPrice);
            });
        });
    </script>

    <script>
        document.addEventListener("DOMContentLoaded", function () {
            const reserveButton = document.getElementById("reserveButton");
            const modal = document.getElementById("modal");
            const modal1= document.getElementById("modal-content");
            const modal2= document.getElementById("modal-content2");
            const cancelButton = document.getElementById("cancelButton");
            const confirmButton = document.getElementById("confirmButton");
            const confirmButton2 = document.getElementById("confirmButton2");
            const situationElement = document.querySelector(".situation span");

            let isMachineBroken = false; // ê¸°ê¸°ê°€ ê³ ì¥ ìƒíƒœì¸ì§€ ì¶”ì 

            // ê¸°ê¸° ìƒíƒœ í™•ì¸ í•¨ìˆ˜
            async function checkMachineStatus() {
                try {
                    const response = await fetch("/reservation/status/101"); // ì„œë²„ì—ì„œ ê¸°ê¸° ìƒíƒœ í™•ì¸
                    if (!response.ok) {
                        throw new Error("ê¸°ê¸° ìƒíƒœë¥¼ ê°€ì ¸ì˜¤ëŠ” ì¤‘ ì˜¤ë¥˜ ë°œìƒ");
                    }
                    const status = await response.text(); // ê¸°ê¸° ìƒíƒœ í…ìŠ¤íŠ¸ ë°˜í™˜

                    // ê¸°ê¸° ìƒíƒœ ì²˜ë¦¬
                    if (status === "ê³ ì¥") {
                        situationElement.textContent = "ê³ ì¥";
                        situationElement.style.color = "#A500FF"; // ë¹¨ê°„ìƒ‰
                        reserveButton.disabled = true; // ì˜ˆì•½ ë²„íŠ¼ ë¹„í™œì„±í™”
                        reserveButton.classList.add("disabled-button"); // ë¹„í™œì„±í™” ìŠ¤íƒ€ì¼ ì¶”ê°€
                        isMachineBroken = true; // ê³ ì¥ ìƒíƒœ ì„¤ì •
                    } else {
                        checkAndUpdateStatus()
                        isMachineBroken = false; // ê³ ì¥ ìƒíƒœ í•´ì œ
                    }
                } catch (error) {
                    console.error("ê¸°ê¸° ìƒíƒœ í™•ì¸ ì¤‘ ì˜¤ë¥˜ ë°œìƒ:", error);
                }
            }

            // ì˜ˆì•½ ìƒíƒœ í™•ì¸ í•¨ìˆ˜
            async function checkAndUpdateStatus() {

                if (isMachineBroken) {
                    // ê¸°ê¸°ê°€ ê³ ì¥ ìƒíƒœë¼ë©´ ì˜ˆì•½ ìƒíƒœë¥¼ í™•ì¸í•˜ì§€ ì•ŠìŒ
                    return;
                }
                const reservationData = {
                    machineNo: document.querySelector(".í˜¸101 span").innerText.trim(), // ê¸°ê¸° ë²ˆí˜¸
                    reserveDate: document.getElementById("washDatetimePicker").value.split(" ")[0], // ë‚ ì§œë§Œ
                    startTime: document.getElementById("washTimeRangeDisplay").textContent.split("~")[0].trim(), // ì‹œì‘ ì‹œê°„
                    endTime: document.getElementById("washTimeRangeDisplay").textContent.split("~")[1].trim(), // ì¢…ë£Œ ì‹œê°„
                };

                const response = await fetch("/reservation/checkStatus", {
                    method: "POST",
                    headers: { "Content-Type": "application/json" },
                    body: JSON.stringify(reservationData),
                });
                const data = await response.json();

                if (data.status === "ì˜ˆì•½ì¤‘") {
                    situationElement.textContent = "ì˜ˆì•½ì¤‘";
                    situationElement.style.color = "#FD3C3C"; // ë¹¨ê°„ìƒ‰ìœ¼ë¡œ ì„¤ì •
                    reserveButton.disabled = true; // ë²„íŠ¼ ë¹„í™œì„±í™”
                    reserveButton.classList.add("disabled-button"); // ë¹„í™œì„±í™” ìŠ¤íƒ€ì¼ ì¶”ê°€
                } else {
                    situationElement.textContent = "ì‚¬ìš©ê°€ëŠ¥";
                    situationElement.style.color = "#0062FF";
                    reserveButton.disabled = false;
                    reserveButton.classList.remove("disabled-button"); // ë¹„í™œì„±í™” ìŠ¤íƒ€ì¼ ì œê±°
                }
            }
            // Flatpickr ì‹œê°„ ë³€ê²½ ì´ë²¤íŠ¸ì— ì˜ˆì•½ ìƒíƒœ í™•ì¸ ì¶”ê°€
            document.getElementById("washDatetimePicker").addEventListener("change", checkAndUpdateStatus);
            document.getElementById("washTimeRangeDisplay").addEventListener("change", checkAndUpdateStatus);


            // ì˜ˆì•½ ì¢…ë£Œ ì‹œê°„ ì—…ë°ì´íŠ¸ (ì„œë²„ì— ì™„ë£Œ ìƒíƒœ ë³€ê²½ ìš”ì²­)
            async function updateReservationStatus() {

                if (isMachineBroken) {
                    // ê¸°ê¸°ê°€ ê³ ì¥ ìƒíƒœë¼ë©´ ì˜ˆì•½ ìƒíƒœë¥¼ í™•ì¸í•˜ì§€ ì•ŠìŒ
                    return;
                }
                try {
                    await fetch("/reservation/updateStatus", {
                        method: "POST",
                        headers: { "Content-Type": "application/json" },
                    });
                    checkAndUpdateStatus(); // ì˜ˆì•½ ìƒíƒœ ë‹¤ì‹œ í™•ì¸
                } catch (error) {
                    console.error("Error:", error);
                }
            }
            // ì˜ˆì•½ ìƒíƒœì™€ ì¢…ë£Œ ì‹œê°„ ìë™ ì—…ë°ì´íŠ¸ (1ë¶„ë§ˆë‹¤ ì‹¤í–‰)
            setInterval(updateReservationStatus, 60000); // 60ì´ˆë§ˆë‹¤ ì‹¤í–‰

            // ì˜ˆì•½í•˜ê¸° ë²„íŠ¼ í´ë¦­ ì‹œ ëª¨ë‹¬ ì—´ê¸°
            reserveButton.addEventListener("click", () => {
                modal.style.display = "block"; // ëª¨ë‹¬ í‘œì‹œ
                modal1.style.display= "block";
                document.body.classList.add("no-scroll"); // ìŠ¤í¬ë¡¤ ë¹„í™œì„±í™”

                // ì‹œì‘ ì‹œê°„ê³¼ ì¢…ë£Œ ì‹œê°„ì„ ê°€ì ¸ì™€ì„œ ëª¨ë‹¬ì— í‘œì‹œ
                const timeRange = washTimeRangeDisplay.textContent; // "ì‹œì‘ì‹œê°„ ~ ì¢…ë£Œì‹œê°„"
                document.getElementById("modalTimeDisplay").textContent = `${timeRange}`;
            });

            // ì·¨ì†Œ ë²„íŠ¼ í´ë¦­ ì‹œ ëª¨ë‹¬ ë‹«ê¸°
            cancelButton.addEventListener("click", () => {
                modal.style.display = "none";
                modal1.style.display="none";
                document.body.classList.remove("no-scroll"); // ìŠ¤í¬ë¡¤ í™œì„±í™”
            });

            // í™•ì¸ ë²„íŠ¼ í´ë¦­ ì‹œ ì²˜ë¦¬
            confirmButton.addEventListener("click", () => {
                // ì˜ˆì•½ ì •ë³´ ìˆ˜ì§‘
                const reservationData = {
                    machineNo: document.querySelector(".í˜¸101 span").innerText.trim(), // ê¸°ê¸° ë²ˆí˜¸
                    reserveDate: document.getElementById("washDatetimePicker").value.split(" ")[0], // ë‚ ì§œë§Œ
                    startTime: document.getElementById("washTimeRangeDisplay").textContent.split("~")[0].trim(), // ì‹œì‘ ì‹œê°„
                    endTime: document.getElementById("washTimeRangeDisplay").textContent.split("~")[1].trim(), // ì¢…ë£Œ ì‹œê°„
                    reserveOption: document.getElementById("washing-options").value, // ì„¸íƒ ì˜µì…˜
                    reservePrice: parseInt(document.getElementById("selected-option").textContent.replace(/[^0-9]/g, ""), 10), // ìˆ«ìë§Œ
                };

                // ì„œë²„ì— ì „ì†¡
                fetch("/reservation/save", {
                    method: "POST",
                    headers: { "Content-Type": "application/json" },
                    body: JSON.stringify(reservationData),
                })
                    .then((response) => {
                        if (response.ok) {

                            document.getElementById("modal").style.display = "block";
                            document.getElementById("modal-content2").style.display = "block";

                            // ì˜ˆì•½ ìƒíƒœë¥¼ í™•ì¸í•˜ê³  ì¦‰ì‹œ ì—…ë°ì´íŠ¸
                            checkAndUpdateStatus();
                        } else {
                            alert("ì˜ˆì•½ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.");
                        }
                    })
                    .catch((error) => console.error("Error:", error));


            });
            confirmButton2.addEventListener("click", () => {
                modal.style.display="none";
                modal2.style.display="none";
                document.body.classList.remove("no-scroll"); // ìŠ¤í¬ë¡¤ í™œì„±í™”

            })

            // ì™¸ë¶€ í´ë¦­ ì°¨ë‹¨ (ëª¨ë“  ëª¨ë‹¬)
            modal.addEventListener("click", (event) => {
                if (!event.target.closest(".modal-content") && !event.target.closest(".modal-content2")) {
                    event.stopPropagation(); // ì™¸ë¶€ í´ë¦­ ì°¨ë‹¨
                }
            });

            // ëª¨ë‹¬ ì™¸ë¶€ì˜ ë‹¤ë¥¸ ë²„íŠ¼ í´ë¦­ ì°¨ë‹¨
            document.addEventListener("click", function (event) {
                if (modal.style.display === "block") {
                    const isModalContent = event.target.closest(".modal-content") || event.target.closest(".modal-content2");
                    if (!isModalContent) {
                        event.stopPropagation();
                    }
                }
            }, true);

            // í˜ì´ì§€ ë¡œë“œ ì‹œ ì˜ˆì•½ ìƒíƒœ í™•ì¸
            checkMachineStatus()
        });

    </script>



    <script>
        document.addEventListener("DOMContentLoaded", function () {
            const reserveButton = document.getElementById("reserveButton2");
            const modal = document.getElementById("modal2");
            const modal1= document.getElementById("modal-content3");
            const modal2= document.getElementById("modal-content4");
            const cancelButton = document.getElementById("cancelButton2");
            const confirmButton = document.getElementById("confirmButton3");
            const confirmButton2 = document.getElementById("confirmButton4");
            const situationElement = document.querySelector(".situation2 span");

            let isMachineBroken = false; // ê¸°ê¸°ê°€ ê³ ì¥ ìƒíƒœì¸ì§€ ì¶”ì 

            // ê¸°ê¸° ìƒíƒœ í™•ì¸ í•¨ìˆ˜
            async function checkMachineStatus() {
                try {
                    const response = await fetch("/reservation/status/102"); // ì„œë²„ì—ì„œ ê¸°ê¸° ìƒíƒœ í™•ì¸
                    if (!response.ok) {
                        throw new Error("ê¸°ê¸° ìƒíƒœë¥¼ ê°€ì ¸ì˜¤ëŠ” ì¤‘ ì˜¤ë¥˜ ë°œìƒ");
                    }
                    const status = await response.text(); // ê¸°ê¸° ìƒíƒœ í…ìŠ¤íŠ¸ ë°˜í™˜

                    // ê¸°ê¸° ìƒíƒœ ì²˜ë¦¬
                    if (status === "ê³ ì¥") {
                        situationElement.textContent = "ê³ ì¥";
                        situationElement.style.color = "#A500FF"; // ë¹¨ê°„ìƒ‰
                        reserveButton.disabled = true; // ì˜ˆì•½ ë²„íŠ¼ ë¹„í™œì„±í™”
                        reserveButton.classList.add("disabled-button"); // ë¹„í™œì„±í™” ìŠ¤íƒ€ì¼ ì¶”ê°€
                        isMachineBroken = true; // ê³ ì¥ ìƒíƒœ ì„¤ì •
                    } else {
                        checkAndUpdateStatus()
                        isMachineBroken = false; // ê³ ì¥ ìƒíƒœ í•´ì œ
                    }
                } catch (error) {
                    console.error("ê¸°ê¸° ìƒíƒœ í™•ì¸ ì¤‘ ì˜¤ë¥˜ ë°œìƒ:", error);
                }
            }

            // ì˜ˆì•½ ìƒíƒœ í™•ì¸ í•¨ìˆ˜
            async function checkAndUpdateStatus() {
                if (isMachineBroken) {
                    // ê¸°ê¸°ê°€ ê³ ì¥ ìƒíƒœë¼ë©´ ì˜ˆì•½ ìƒíƒœë¥¼ í™•ì¸í•˜ì§€ ì•ŠìŒ
                    return;
                }
                const reservationData = {
                    machineNo: document.querySelector(".í˜¸102 span").innerText.trim(), // ê¸°ê¸° ë²ˆí˜¸
                    reserveDate: document.getElementById("washDatetimePicker").value.split(" ")[0], // ë‚ ì§œë§Œ
                    startTime: document.getElementById("washTimeRangeDisplay").textContent.split("~")[0].trim(), // ì‹œì‘ ì‹œê°„
                    endTime: document.getElementById("washTimeRangeDisplay").textContent.split("~")[1].trim(), // ì¢…ë£Œ ì‹œê°„
                };

                const response = await fetch("/reservation/checkStatus", {
                    method: "POST",
                    headers: { "Content-Type": "application/json" },
                    body: JSON.stringify(reservationData),
                });
                const data = await response.json();

                if (data.status === "ì˜ˆì•½ì¤‘") {
                    situationElement.textContent = "ì˜ˆì•½ì¤‘";
                    situationElement.style.color = "#FD3C3C"; // ë¹¨ê°„ìƒ‰ìœ¼ë¡œ ì„¤ì •
                    reserveButton.disabled = true; // ë²„íŠ¼ ë¹„í™œì„±í™”
                    reserveButton.classList.add("disabled-button"); // ë¹„í™œì„±í™” ìŠ¤íƒ€ì¼ ì¶”ê°€
                } else {
                    situationElement.textContent = "ì‚¬ìš©ê°€ëŠ¥";
                    situationElement.style.color = "#0062FF";
                    reserveButton.disabled = false;
                    reserveButton.classList.remove("disabled-button"); // ë¹„í™œì„±í™” ìŠ¤íƒ€ì¼ ì œê±°
                }
            }
            // Flatpickr ì‹œê°„ ë³€ê²½ ì´ë²¤íŠ¸ì— ì˜ˆì•½ ìƒíƒœ í™•ì¸ ì¶”ê°€
            document.getElementById("washDatetimePicker").addEventListener("change", checkAndUpdateStatus);
            document.getElementById("washTimeRangeDisplay").addEventListener("change", checkAndUpdateStatus);


            // ì˜ˆì•½ ì¢…ë£Œ ì‹œê°„ ì—…ë°ì´íŠ¸ (ì„œë²„ì— ì™„ë£Œ ìƒíƒœ ë³€ê²½ ìš”ì²­)
            async function updateReservationStatus() {
                if (isMachineBroken) {
                    // ê¸°ê¸°ê°€ ê³ ì¥ ìƒíƒœë¼ë©´ ì˜ˆì•½ ìƒíƒœë¥¼ ì—…ë°ì´íŠ¸í•˜ì§€ ì•ŠìŒ
                    return;
                }

                try {
                    await fetch("/reservation/updateStatus", {
                        method: "POST",
                        headers: { "Content-Type": "application/json" },
                    });
                    checkAndUpdateStatus(); // ì˜ˆì•½ ìƒíƒœ ë‹¤ì‹œ í™•ì¸
                } catch (error) {
                    console.error("Error:", error);
                }
            }
            // ì˜ˆì•½ ìƒíƒœì™€ ì¢…ë£Œ ì‹œê°„ ìë™ ì—…ë°ì´íŠ¸ (1ë¶„ë§ˆë‹¤ ì‹¤í–‰)
            setInterval(updateReservationStatus, 60000);

            // ì˜ˆì•½í•˜ê¸° ë²„íŠ¼ í´ë¦­ ì‹œ ëª¨ë‹¬ ì—´ê¸°
            reserveButton.addEventListener("click", () => {
                modal.style.display = "block"; // ëª¨ë‹¬ í‘œì‹œ
                modal1.style.display= "block";
                document.body.classList.add("no-scroll"); // ìŠ¤í¬ë¡¤ ë¹„í™œì„±í™”

                // ì‹œì‘ ì‹œê°„ê³¼ ì¢…ë£Œ ì‹œê°„ì„ ê°€ì ¸ì™€ì„œ ëª¨ë‹¬ì— í‘œì‹œ
                const timeRange = washTimeRangeDisplay.textContent; // "ì‹œì‘ì‹œê°„ ~ ì¢…ë£Œì‹œê°„"
                document.getElementById("modalTimeDisplay2").textContent = `${timeRange}`;
            });

            // ì·¨ì†Œ ë²„íŠ¼ í´ë¦­ ì‹œ ëª¨ë‹¬ ë‹«ê¸°
            cancelButton.addEventListener("click", () => {
                modal.style.display = "none";
                modal1.style.display="none";
                document.body.classList.remove("no-scroll"); // ìŠ¤í¬ë¡¤ í™œì„±í™”
            });

            // í™•ì¸ ë²„íŠ¼ í´ë¦­ ì‹œ ì²˜ë¦¬
            confirmButton.addEventListener("click", () => {
                // ì˜ˆì•½ ì •ë³´ ìˆ˜ì§‘
                const reservationData = {
                    machineNo: document.querySelector(".í˜¸102 span").innerText.trim(), // ê¸°ê¸° ë²ˆí˜¸
                    reserveDate: document.getElementById("washDatetimePicker").value.split(" ")[0], // ë‚ ì§œë§Œ
                    startTime: document.getElementById("washTimeRangeDisplay").textContent.split("~")[0].trim(), // ì‹œì‘ ì‹œê°„
                    endTime: document.getElementById("washTimeRangeDisplay").textContent.split("~")[1].trim(), // ì¢…ë£Œ ì‹œê°„
                    reserveOption: document.getElementById("washing-options2").value, // ì„¸íƒ ì˜µì…˜
                    reservePrice: parseInt(document.getElementById("selected-option2").textContent.replace(/[^0-9]/g, ""), 10), // ìˆ«ìë§Œ
                };

                // ì„œë²„ì— ì „ì†¡
                fetch("/reservation/save", {
                    method: "POST",
                    headers: { "Content-Type": "application/json" },
                    body: JSON.stringify(reservationData),
                })
                    .then((response) => {
                        if (response.ok) {

                            document.getElementById("modal2").style.display = "block";
                            document.getElementById("modal-content4").style.display = "block";
                            checkAndUpdateStatus();
                        } else {
                            alert("ì˜ˆì•½ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.");
                        }
                    })
                    .catch((error) => console.error("Error:", error));



            });
            confirmButton2.addEventListener("click", () => {
                modal.style.display="none";
                modal2.style.display="none";
                document.body.classList.remove("no-scroll"); // ìŠ¤í¬ë¡¤ í™œì„±í™”
            })

            // ì™¸ë¶€ í´ë¦­ ì°¨ë‹¨ (ëª¨ë“  ëª¨ë‹¬)
            modal.addEventListener("click", (event) => {
                if (!event.target.closest(".modal-content") && !event.target.closest(".modal-content2")) {
                    event.stopPropagation(); // ì™¸ë¶€ í´ë¦­ ì°¨ë‹¨
                }
            });

            // ëª¨ë‹¬ ì™¸ë¶€ì˜ ë‹¤ë¥¸ ë²„íŠ¼ í´ë¦­ ì°¨ë‹¨
            document.addEventListener("click", function (event) {
                if (modal.style.display === "block") {
                    const isModalContent = event.target.closest(".modal-content") || event.target.closest(".modal-content2");
                    if (!isModalContent) {
                        event.stopPropagation();
                    }
                }
            }, true);


            checkMachineStatus();

        });

    </script>

    <script>
        document.addEventListener("DOMContentLoaded", function () {
            const reserveButton = document.getElementById("reserveButton3");
            const modal = document.getElementById("modal3");
            const modal1= document.getElementById("modal-content5");
            const modal2= document.getElementById("modal-content6");
            const cancelButton = document.getElementById("cancelButton3");
            const confirmButton = document.getElementById("confirmButton5");
            const confirmButton2 = document.getElementById("confirmButton6");
            const situationElement = document.querySelector(".situation3 span");

            let isMachineBroken = false; // ê¸°ê¸°ê°€ ê³ ì¥ ìƒíƒœì¸ì§€ ì¶”ì 

            // ê¸°ê¸° ìƒíƒœ í™•ì¸ í•¨ìˆ˜
            async function checkMachineStatus() {
                try {
                    const response = await fetch("/reservation/status/103"); // ì„œë²„ì—ì„œ ê¸°ê¸° ìƒíƒœ í™•ì¸
                    if (!response.ok) {
                        throw new Error("ê¸°ê¸° ìƒíƒœë¥¼ ê°€ì ¸ì˜¤ëŠ” ì¤‘ ì˜¤ë¥˜ ë°œìƒ");
                    }
                    const status = await response.text(); // ê¸°ê¸° ìƒíƒœ í…ìŠ¤íŠ¸ ë°˜í™˜

                    // ê¸°ê¸° ìƒíƒœ ì²˜ë¦¬
                    if (status === "ê³ ì¥") {
                        situationElement.textContent = "ê³ ì¥";
                        situationElement.style.color = "#A500FF"; // ë¹¨ê°„ìƒ‰
                        reserveButton.disabled = true; // ì˜ˆì•½ ë²„íŠ¼ ë¹„í™œì„±í™”
                        reserveButton.classList.add("disabled-button"); // ë¹„í™œì„±í™” ìŠ¤íƒ€ì¼ ì¶”ê°€
                        isMachineBroken = true; // ê³ ì¥ ìƒíƒœ ì„¤ì •
                    } else {
                        checkAndUpdateStatus()
                        isMachineBroken = false; // ê³ ì¥ ìƒíƒœ í•´ì œ
                    }
                } catch (error) {
                    console.error("ê¸°ê¸° ìƒíƒœ í™•ì¸ ì¤‘ ì˜¤ë¥˜ ë°œìƒ:", error);
                }
            }

            // ì˜ˆì•½ ìƒíƒœ í™•ì¸ í•¨ìˆ˜
            async function checkAndUpdateStatus() {

                if (isMachineBroken) {
                    // ê¸°ê¸°ê°€ ê³ ì¥ ìƒíƒœë¼ë©´ ì˜ˆì•½ ìƒíƒœë¥¼ ì—…ë°ì´íŠ¸í•˜ì§€ ì•ŠìŒ
                    return;
                }
                const reservationData = {
                    machineNo: document.querySelector(".í˜¸103 span").innerText.trim(), // ê¸°ê¸° ë²ˆí˜¸
                    reserveDate: document.getElementById("washDatetimePicker").value.split(" ")[0], // ë‚ ì§œë§Œ
                    startTime: document.getElementById("washTimeRangeDisplay").textContent.split("~")[0].trim(), // ì‹œì‘ ì‹œê°„
                    endTime: document.getElementById("washTimeRangeDisplay").textContent.split("~")[1].trim(), // ì¢…ë£Œ ì‹œê°„
                };

                const response = await fetch("/reservation/checkStatus", {
                    method: "POST",
                    headers: { "Content-Type": "application/json" },
                    body: JSON.stringify(reservationData),
                });
                const data = await response.json();

                if (data.status === "ì˜ˆì•½ì¤‘") {
                    situationElement.textContent = "ì˜ˆì•½ì¤‘";
                    situationElement.style.color = "#FD3C3C"; // ë¹¨ê°„ìƒ‰ìœ¼ë¡œ ì„¤ì •
                    reserveButton.disabled = true; // ë²„íŠ¼ ë¹„í™œì„±í™”
                    reserveButton.classList.add("disabled-button"); // ë¹„í™œì„±í™” ìŠ¤íƒ€ì¼ ì¶”ê°€
                } else {
                    situationElement.textContent = "ì‚¬ìš©ê°€ëŠ¥";
                    situationElement.style.color = "#0062FF";
                    reserveButton.disabled = false;
                    reserveButton.classList.remove("disabled-button"); // ë¹„í™œì„±í™” ìŠ¤íƒ€ì¼ ì œê±°
                }
            }
            // Flatpickr ì‹œê°„ ë³€ê²½ ì´ë²¤íŠ¸ì— ì˜ˆì•½ ìƒíƒœ í™•ì¸ ì¶”ê°€
            document.getElementById("washDatetimePicker").addEventListener("change", checkAndUpdateStatus);
            document.getElementById("washTimeRangeDisplay").addEventListener("change", checkAndUpdateStatus);


            // ì˜ˆì•½ ì¢…ë£Œ ì‹œê°„ ì—…ë°ì´íŠ¸ (ì„œë²„ì— ì™„ë£Œ ìƒíƒœ ë³€ê²½ ìš”ì²­)
            async function updateReservationStatus() {

                if (isMachineBroken) {
                    // ê¸°ê¸°ê°€ ê³ ì¥ ìƒíƒœë¼ë©´ ì˜ˆì•½ ìƒíƒœë¥¼ ì—…ë°ì´íŠ¸í•˜ì§€ ì•ŠìŒ
                    return;
                }
                try {
                    await fetch("/reservation/updateStatus", {
                        method: "POST",
                        headers: { "Content-Type": "application/json" },
                    });
                    checkAndUpdateStatus(); // ì˜ˆì•½ ìƒíƒœ ë‹¤ì‹œ í™•ì¸
                } catch (error) {
                    console.error("Error:", error);
                }
            }
            // ì˜ˆì•½ ìƒíƒœì™€ ì¢…ë£Œ ì‹œê°„ ìë™ ì—…ë°ì´íŠ¸ (1ë¶„ë§ˆë‹¤ ì‹¤í–‰)
            setInterval(updateReservationStatus, 60000);


            // ì˜ˆì•½í•˜ê¸° ë²„íŠ¼ í´ë¦­ ì‹œ ëª¨ë‹¬ ì—´ê¸°
            reserveButton.addEventListener("click", () => {
                modal.style.display = "block"; // ëª¨ë‹¬ í‘œì‹œ
                modal1.style.display= "block";
                document.body.classList.add("no-scroll"); // ìŠ¤í¬ë¡¤ ë¹„í™œì„±í™”

                // ì‹œì‘ ì‹œê°„ê³¼ ì¢…ë£Œ ì‹œê°„ì„ ê°€ì ¸ì™€ì„œ ëª¨ë‹¬ì— í‘œì‹œ
                const timeRange = washTimeRangeDisplay.textContent; // "ì‹œì‘ì‹œê°„ ~ ì¢…ë£Œì‹œê°„"
                document.getElementById("modalTimeDisplay3").textContent = `${timeRange}`;
            });

            // ì·¨ì†Œ ë²„íŠ¼ í´ë¦­ ì‹œ ëª¨ë‹¬ ë‹«ê¸°
            cancelButton.addEventListener("click", () => {
                modal.style.display = "none";
                modal1.style.display="none";
                document.body.classList.remove("no-scroll"); // ìŠ¤í¬ë¡¤ í™œì„±í™”
            });

            // í™•ì¸ ë²„íŠ¼ í´ë¦­ ì‹œ ì²˜ë¦¬
            confirmButton.addEventListener("click", () => {
                // ì˜ˆì•½ ì •ë³´ ìˆ˜ì§‘
                const reservationData = {
                    machineNo: document.querySelector(".í˜¸103 span").innerText.trim(), // ê¸°ê¸° ë²ˆí˜¸
                    reserveDate: document.getElementById("washDatetimePicker").value.split(" ")[0], // ë‚ ì§œë§Œ
                    startTime: document.getElementById("washTimeRangeDisplay").textContent.split("~")[0].trim(), // ì‹œì‘ ì‹œê°„
                    endTime: document.getElementById("washTimeRangeDisplay").textContent.split("~")[1].trim(), // ì¢…ë£Œ ì‹œê°„
                    reserveOption: document.getElementById("washing-options3").value, // ì„¸íƒ ì˜µì…˜
                    reservePrice: parseInt(document.getElementById("selected-option3").textContent.replace(/[^0-9]/g, ""), 10), // ìˆ«ìë§Œ
                };

                // ì„œë²„ì— ì „ì†¡
                fetch("/reservation/save", {
                    method: "POST",
                    headers: { "Content-Type": "application/json" },
                    body: JSON.stringify(reservationData),
                })
                    .then((response) => {
                        if (response.ok) {

                            document.getElementById("modal3").style.display = "block";
                            document.getElementById("modal-content6").style.display = "block";
                            checkAndUpdateStatus();
                        } else {
                            alert("ì˜ˆì•½ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.");
                        }
                    })
                    .catch((error) => console.error("Error:", error));
            });
            confirmButton2.addEventListener("click", () => {
                modal.style.display="none";
                modal2.style.display="none";
                document.body.classList.remove("no-scroll"); // ìŠ¤í¬ë¡¤ í™œì„±í™”
            })

            // ì™¸ë¶€ í´ë¦­ ì°¨ë‹¨ (ëª¨ë“  ëª¨ë‹¬)
            modal.addEventListener("click", (event) => {
                if (!event.target.closest(".modal-content") && !event.target.closest(".modal-content2")) {
                    event.stopPropagation(); // ì™¸ë¶€ í´ë¦­ ì°¨ë‹¨
                }
            });

            // ëª¨ë‹¬ ì™¸ë¶€ì˜ ë‹¤ë¥¸ ë²„íŠ¼ í´ë¦­ ì°¨ë‹¨
            document.addEventListener("click", function (event) {
                if (modal.style.display === "block") {
                    const isModalContent = event.target.closest(".modal-content") || event.target.closest(".modal-content2");
                    if (!isModalContent) {
                        event.stopPropagation();
                    }
                }
            }, true);
            checkMachineStatus()
        });

    </script>

    <script>
        document.addEventListener("DOMContentLoaded", function () {
            const reserveButton = document.getElementById("reserveButton4");
            const modal = document.getElementById("modal4");
            const modal1= document.getElementById("modal-content7");
            const modal2= document.getElementById("modal-content8");
            const cancelButton = document.getElementById("cancelButton4");
            const confirmButton = document.getElementById("confirmButton7");
            const confirmButton2 = document.getElementById("confirmButton8");
            const situationElement = document.querySelector(".dry-situation span");
            let isMachineBroken = false; // ê¸°ê¸°ê°€ ê³ ì¥ ìƒíƒœì¸ì§€ ì¶”ì 
            // ê¸°ê¸° ìƒíƒœ í™•ì¸ í•¨ìˆ˜
            async function checkMachineStatus() {
                try {
                    const response = await fetch("/reservation/status/201"); // ì„œë²„ì—ì„œ ê¸°ê¸° ìƒíƒœ í™•ì¸
                    if (!response.ok) {
                        throw new Error("ê¸°ê¸° ìƒíƒœë¥¼ ê°€ì ¸ì˜¤ëŠ” ì¤‘ ì˜¤ë¥˜ ë°œìƒ");
                    }
                    const status = await response.text(); // ê¸°ê¸° ìƒíƒœ í…ìŠ¤íŠ¸ ë°˜í™˜

                    // ê¸°ê¸° ìƒíƒœ ì²˜ë¦¬
                    if (status === "ê³ ì¥") {
                        situationElement.textContent = "ê³ ì¥";
                        situationElement.style.color = "#A500FF"; // ë¹¨ê°„ìƒ‰
                        reserveButton.disabled = true; // ì˜ˆì•½ ë²„íŠ¼ ë¹„í™œì„±í™”
                        reserveButton.classList.add("disabled-button"); // ë¹„í™œì„±í™” ìŠ¤íƒ€ì¼ ì¶”ê°€
                        isMachineBroken = true; // ê³ ì¥ ìƒíƒœ ì„¤ì •
                    } else {
                        checkAndUpdateStatus()
                        isMachineBroken = false; // ê³ ì¥ ìƒíƒœ í•´ì œ
                    }
                } catch (error) {
                    console.error("ê¸°ê¸° ìƒíƒœ í™•ì¸ ì¤‘ ì˜¤ë¥˜ ë°œìƒ:", error);
                }
            }

            // ì˜ˆì•½ ìƒíƒœ í™•ì¸ í•¨ìˆ˜
            async function checkAndUpdateStatus() {
                if (isMachineBroken) {
                    // ê¸°ê¸°ê°€ ê³ ì¥ ìƒíƒœë¼ë©´ ì˜ˆì•½ ìƒíƒœë¥¼ ì—…ë°ì´íŠ¸í•˜ì§€ ì•ŠìŒ
                    return;
                }
                const reservationData = {
                    machineNo: document.querySelector(".í˜¸201 span").innerText.trim(), // ê¸°ê¸° ë²ˆí˜¸
                    reserveDate: document.getElementById("dryDatetimePicker").value.split(" ")[0], // ë‚ ì§œë§Œ
                    startTime: document.getElementById("dryTimeRangeDisplay").textContent.split("~")[0].trim(), // ì‹œì‘ ì‹œê°„
                    endTime: document.getElementById("dryTimeRangeDisplay").textContent.split("~")[1].trim(), // ì¢…ë£Œ ì‹œê°„
                };

                const response = await fetch("/reservation/checkStatus", {
                    method: "POST",
                    headers: { "Content-Type": "application/json" },
                    body: JSON.stringify(reservationData),
                });
                const data = await response.json();

                if (data.status === "ì˜ˆì•½ì¤‘") {
                    situationElement.textContent = "ì˜ˆì•½ì¤‘";
                    situationElement.style.color = "#FD3C3C"; // ë¹¨ê°„ìƒ‰ìœ¼ë¡œ ì„¤ì •
                    reserveButton.disabled = true; // ë²„íŠ¼ ë¹„í™œì„±í™”
                    reserveButton.classList.add("disabled-button"); // ë¹„í™œì„±í™” ìŠ¤íƒ€ì¼ ì¶”ê°€
                } else {
                    situationElement.textContent = "ì‚¬ìš©ê°€ëŠ¥";
                    situationElement.style.color = "#0062FF";
                    reserveButton.disabled = false;
                    reserveButton.classList.remove("disabled-button"); // ë¹„í™œì„±í™” ìŠ¤íƒ€ì¼ ì œê±°
                }
            }
            // Flatpickr ì‹œê°„ ë³€ê²½ ì´ë²¤íŠ¸ì— ì˜ˆì•½ ìƒíƒœ í™•ì¸ ì¶”ê°€
            document.getElementById("dryDatetimePicker").addEventListener("change", checkAndUpdateStatus);
            document.getElementById("dryTimeRangeDisplay").addEventListener("change", checkAndUpdateStatus);


            // ì˜ˆì•½ ì¢…ë£Œ ì‹œê°„ ì—…ë°ì´íŠ¸ (ì„œë²„ì— ì™„ë£Œ ìƒíƒœ ë³€ê²½ ìš”ì²­)
            async function updateReservationStatus() {

                if (isMachineBroken) {
                    // ê¸°ê¸°ê°€ ê³ ì¥ ìƒíƒœë¼ë©´ ì˜ˆì•½ ìƒíƒœë¥¼ ì—…ë°ì´íŠ¸í•˜ì§€ ì•ŠìŒ
                    return;
                }
                try {
                    await fetch("/reservation/updateStatus", {
                        method: "POST",
                        headers: { "Content-Type": "application/json" },
                    });
                    checkAndUpdateStatus(); // ì˜ˆì•½ ìƒíƒœ ë‹¤ì‹œ í™•ì¸
                } catch (error) {
                    console.error("Error:", error);
                }
            }
            // ì˜ˆì•½ ìƒíƒœì™€ ì¢…ë£Œ ì‹œê°„ ìë™ ì—…ë°ì´íŠ¸ (1ë¶„ë§ˆë‹¤ ì‹¤í–‰)
            setInterval(updateReservationStatus, 60000);


            // ì˜ˆì•½í•˜ê¸° ë²„íŠ¼ í´ë¦­ ì‹œ ëª¨ë‹¬ ì—´ê¸°
            reserveButton.addEventListener("click", () => {
                modal.style.display = "block"; // ëª¨ë‹¬ í‘œì‹œ
                modal1.style.display= "block";
                document.body.classList.add("no-scroll"); // ìŠ¤í¬ë¡¤ ë¹„í™œì„±í™”

                // ì‹œì‘ ì‹œê°„ê³¼ ì¢…ë£Œ ì‹œê°„ì„ ê°€ì ¸ì™€ì„œ ëª¨ë‹¬ì— í‘œì‹œ
                const timeRange = dryTimeRangeDisplay.textContent; // "ì‹œì‘ì‹œê°„ ~ ì¢…ë£Œì‹œê°„"
                document.getElementById("modalTimeDisplay4").textContent = `${timeRange}`;
            });

            // ì·¨ì†Œ ë²„íŠ¼ í´ë¦­ ì‹œ ëª¨ë‹¬ ë‹«ê¸°
            cancelButton.addEventListener("click", () => {
                modal.style.display = "none";
                modal1.style.display="none";
                document.body.classList.remove("no-scroll"); // ìŠ¤í¬ë¡¤ í™œì„±í™”
            });

            // í™•ì¸ ë²„íŠ¼ í´ë¦­ ì‹œ ì²˜ë¦¬
            confirmButton.addEventListener("click", () => {
                // ì˜ˆì•½ ì •ë³´ ìˆ˜ì§‘
                const reservationData = {
                    machineNo: document.querySelector(".í˜¸201 span").innerText.trim(), // ê¸°ê¸° ë²ˆí˜¸
                    reserveDate: document.getElementById("dryDatetimePicker").value.split(" ")[0], // ë‚ ì§œë§Œ
                    startTime: document.getElementById("dryTimeRangeDisplay").textContent.split("~")[0].trim(), // ì‹œì‘ ì‹œê°„
                    endTime: document.getElementById("dryTimeRangeDisplay").textContent.split("~")[1].trim(), // ì¢…ë£Œ ì‹œê°„
                    reserveOption: document.getElementById("drying-options").value, // ì„¸íƒ ì˜µì…˜
                    reservePrice: parseInt(document.getElementById("dry-selected-option").textContent.replace(/[^0-9]/g, ""), 10), // ìˆ«ìë§Œ
                };

                // ì„œë²„ì— ì „ì†¡
                fetch("/reservation/save", {
                    method: "POST",
                    headers: { "Content-Type": "application/json" },
                    body: JSON.stringify(reservationData),
                })
                    .then((response) => {
                        if (response.ok) {

                            document.getElementById("modal4").style.display = "block";
                            document.getElementById("modal-content8").style.display = "block";
                            checkAndUpdateStatus();
                        } else {
                            alert("ì˜ˆì•½ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.");
                        }
                    })
                    .catch((error) => console.error("Error:", error));
            });
            confirmButton2.addEventListener("click", () => {
                modal.style.display="none";
                modal2.style.display="none";
                document.body.classList.remove("no-scroll"); // ìŠ¤í¬ë¡¤ í™œì„±í™”
            })

            // ì™¸ë¶€ í´ë¦­ ì°¨ë‹¨ (ëª¨ë“  ëª¨ë‹¬)
            modal.addEventListener("click", (event) => {
                if (!event.target.closest(".modal-content") && !event.target.closest(".modal-content2")) {
                    event.stopPropagation(); // ì™¸ë¶€ í´ë¦­ ì°¨ë‹¨
                }
            });

            // ëª¨ë‹¬ ì™¸ë¶€ì˜ ë‹¤ë¥¸ ë²„íŠ¼ í´ë¦­ ì°¨ë‹¨
            document.addEventListener("click", function (event) {
                if (modal.style.display === "block") {
                    const isModalContent = event.target.closest(".modal-content") || event.target.closest(".modal-content2");
                    if (!isModalContent) {
                        event.stopPropagation();
                    }
                }
            }, true);
            checkMachineStatus()
        });

    </script>

    <script>
        document.addEventListener("DOMContentLoaded", function () {
            const reserveButton = document.getElementById("reserveButton5");
            const modal = document.getElementById("modal5");
            const modal1= document.getElementById("modal-content9");
            const modal2= document.getElementById("modal-content10");
            const cancelButton = document.getElementById("cancelButton5");
            const confirmButton = document.getElementById("confirmButton9");
            const confirmButton2 = document.getElementById("confirmButton10");
            const situationElement = document.querySelector(".dry-situation2 span");

            let isMachineBroken = false; // ê¸°ê¸°ê°€ ê³ ì¥ ìƒíƒœì¸ì§€ ì¶”ì 
            // ê¸°ê¸° ìƒíƒœ í™•ì¸ í•¨ìˆ˜
            async function checkMachineStatus() {
                try {
                    const response = await fetch("/reservation/status/202"); // ì„œë²„ì—ì„œ ê¸°ê¸° ìƒíƒœ í™•ì¸
                    if (!response.ok) {
                        throw new Error("ê¸°ê¸° ìƒíƒœë¥¼ ê°€ì ¸ì˜¤ëŠ” ì¤‘ ì˜¤ë¥˜ ë°œìƒ");
                    }
                    const status = await response.text(); // ê¸°ê¸° ìƒíƒœ í…ìŠ¤íŠ¸ ë°˜í™˜

                    // ê¸°ê¸° ìƒíƒœ ì²˜ë¦¬
                    if (status === "ê³ ì¥") {
                        situationElement.textContent = "ê³ ì¥";
                        situationElement.style.color = "#A500FF"; // ë¹¨ê°„ìƒ‰
                        reserveButton.disabled = true; // ì˜ˆì•½ ë²„íŠ¼ ë¹„í™œì„±í™”
                        reserveButton.classList.add("disabled-button"); // ë¹„í™œì„±í™” ìŠ¤íƒ€ì¼ ì¶”ê°€
                        isMachineBroken = true; // ê³ ì¥ ìƒíƒœ ì„¤ì •
                    } else {
                        checkAndUpdateStatus()
                        isMachineBroken = false; // ê³ ì¥ ìƒíƒœ í•´ì œ
                    }
                } catch (error) {
                    console.error("ê¸°ê¸° ìƒíƒœ í™•ì¸ ì¤‘ ì˜¤ë¥˜ ë°œìƒ:", error);
                }
            }

            // ì˜ˆì•½ ìƒíƒœ í™•ì¸ í•¨ìˆ˜
            async function checkAndUpdateStatus() {
                if (isMachineBroken) {
                    // ê¸°ê¸°ê°€ ê³ ì¥ ìƒíƒœë¼ë©´ ì˜ˆì•½ ìƒíƒœë¥¼ ì—…ë°ì´íŠ¸í•˜ì§€ ì•ŠìŒ
                    return;
                }
                const reservationData = {
                    machineNo: document.querySelector(".í˜¸202 span").innerText.trim(), // ê¸°ê¸° ë²ˆí˜¸
                    reserveDate: document.getElementById("dryDatetimePicker").value.split(" ")[0], // ë‚ ì§œë§Œ
                    startTime: document.getElementById("dryTimeRangeDisplay").textContent.split("~")[0].trim(), // ì‹œì‘ ì‹œê°„
                    endTime: document.getElementById("dryTimeRangeDisplay").textContent.split("~")[1].trim(), // ì¢…ë£Œ ì‹œê°„
                };

                const response = await fetch("/reservation/checkStatus", {
                    method: "POST",
                    headers: { "Content-Type": "application/json" },
                    body: JSON.stringify(reservationData),
                });
                const data = await response.json();

                if (data.status === "ì˜ˆì•½ì¤‘") {
                    situationElement.textContent = "ì˜ˆì•½ì¤‘";
                    situationElement.style.color = "#FD3C3C"; // ë¹¨ê°„ìƒ‰ìœ¼ë¡œ ì„¤ì •
                    reserveButton.disabled = true; // ë²„íŠ¼ ë¹„í™œì„±í™”
                    reserveButton.classList.add("disabled-button"); // ë¹„í™œì„±í™” ìŠ¤íƒ€ì¼ ì¶”ê°€
                } else {
                    situationElement.textContent = "ì‚¬ìš©ê°€ëŠ¥";
                    situationElement.style.color = "#0062FF";
                    reserveButton.disabled = false;
                    reserveButton.classList.remove("disabled-button"); // ë¹„í™œì„±í™” ìŠ¤íƒ€ì¼ ì œê±°
                }
            }
            // Flatpickr ì‹œê°„ ë³€ê²½ ì´ë²¤íŠ¸ì— ì˜ˆì•½ ìƒíƒœ í™•ì¸ ì¶”ê°€
            document.getElementById("dryDatetimePicker").addEventListener("change", checkAndUpdateStatus);
            document.getElementById("dryTimeRangeDisplay").addEventListener("change", checkAndUpdateStatus);


            // ì˜ˆì•½ ì¢…ë£Œ ì‹œê°„ ì—…ë°ì´íŠ¸ (ì„œë²„ì— ì™„ë£Œ ìƒíƒœ ë³€ê²½ ìš”ì²­)
            async function updateReservationStatus() {
                if (isMachineBroken) {
                    // ê¸°ê¸°ê°€ ê³ ì¥ ìƒíƒœë¼ë©´ ì˜ˆì•½ ìƒíƒœë¥¼ ì—…ë°ì´íŠ¸í•˜ì§€ ì•ŠìŒ
                    return;
                }
                try {
                    await fetch("/reservation/updateStatus", {
                        method: "POST",
                        headers: { "Content-Type": "application/json" },
                    });
                    checkAndUpdateStatus(); // ì˜ˆì•½ ìƒíƒœ ë‹¤ì‹œ í™•ì¸
                } catch (error) {
                    console.error("Error:", error);
                }
            }
            // ì˜ˆì•½ ìƒíƒœì™€ ì¢…ë£Œ ì‹œê°„ ìë™ ì—…ë°ì´íŠ¸ (1ë¶„ë§ˆë‹¤ ì‹¤í–‰)
            setInterval(updateReservationStatus, 60000);

            // ì˜ˆì•½í•˜ê¸° ë²„íŠ¼ í´ë¦­ ì‹œ ëª¨ë‹¬ ì—´ê¸°
            reserveButton.addEventListener("click", () => {
                modal.style.display = "block"; // ëª¨ë‹¬ í‘œì‹œ
                modal1.style.display= "block";
                document.body.classList.add("no-scroll"); // ìŠ¤í¬ë¡¤ ë¹„í™œì„±í™”

                // ì‹œì‘ ì‹œê°„ê³¼ ì¢…ë£Œ ì‹œê°„ì„ ê°€ì ¸ì™€ì„œ ëª¨ë‹¬ì— í‘œì‹œ
                const timeRange = dryTimeRangeDisplay.textContent; // "ì‹œì‘ì‹œê°„ ~ ì¢…ë£Œì‹œê°„"
                document.getElementById("modalTimeDisplay5").textContent = `${timeRange}`;
            });

            // ì·¨ì†Œ ë²„íŠ¼ í´ë¦­ ì‹œ ëª¨ë‹¬ ë‹«ê¸°
            cancelButton.addEventListener("click", () => {
                modal.style.display = "none";
                modal1.style.display="none";
                document.body.classList.remove("no-scroll"); // ìŠ¤í¬ë¡¤ í™œì„±í™”
            });

            // í™•ì¸ ë²„íŠ¼ í´ë¦­ ì‹œ ì²˜ë¦¬
            confirmButton.addEventListener("click", () => {
                // ì˜ˆì•½ ì •ë³´ ìˆ˜ì§‘
                const reservationData = {
                    machineNo: document.querySelector(".í˜¸202 span").innerText.trim(), // ê¸°ê¸° ë²ˆí˜¸
                    reserveDate: document.getElementById("dryDatetimePicker").value.split(" ")[0], // ë‚ ì§œë§Œ
                    startTime: document.getElementById("dryTimeRangeDisplay").textContent.split("~")[0].trim(), // ì‹œì‘ ì‹œê°„
                    endTime: document.getElementById("dryTimeRangeDisplay").textContent.split("~")[1].trim(), // ì¢…ë£Œ ì‹œê°„
                    reserveOption: document.getElementById("drying-options2").value, // ì„¸íƒ ì˜µì…˜
                    reservePrice: parseInt(document.getElementById("dry-selected-option2").textContent.replace(/[^0-9]/g, ""), 10), // ìˆ«ìë§Œ
                };

                // ì„œë²„ì— ì „ì†¡
                fetch("/reservation/save", {
                    method: "POST",
                    headers: { "Content-Type": "application/json" },
                    body: JSON.stringify(reservationData),
                })
                    .then((response) => {
                        if (response.ok) {

                            document.getElementById("modal5").style.display = "block";
                            document.getElementById("modal-content10").style.display = "block";
                            checkAndUpdateStatus();
                        } else {
                            alert("ì˜ˆì•½ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.");
                        }
                    })
                    .catch((error) => console.error("Error:", error));
            });
            confirmButton2.addEventListener("click", () => {
                modal.style.display="none";
                modal2.style.display="none";
                document.body.classList.remove("no-scroll"); // ìŠ¤í¬ë¡¤ í™œì„±í™”
            })

            // ì™¸ë¶€ í´ë¦­ ì°¨ë‹¨ (ëª¨ë“  ëª¨ë‹¬)
            modal.addEventListener("click", (event) => {
                if (!event.target.closest(".modal-content") && !event.target.closest(".modal-content2")) {
                    event.stopPropagation(); // ì™¸ë¶€ í´ë¦­ ì°¨ë‹¨
                }
            });

            // ëª¨ë‹¬ ì™¸ë¶€ì˜ ë‹¤ë¥¸ ë²„íŠ¼ í´ë¦­ ì°¨ë‹¨
            document.addEventListener("click", function (event) {
                if (modal.style.display === "block") {
                    const isModalContent = event.target.closest(".modal-content") || event.target.closest(".modal-content2");
                    if (!isModalContent) {
                        event.stopPropagation();
                    }
                }
            }, true);
            checkMachineStatus()
        });

    </script>

    <script>
        document.addEventListener("DOMContentLoaded", function () {
            const reserveButton = document.getElementById("reserveButton6");
            const modal = document.getElementById("modal6");
            const modal1= document.getElementById("modal-content11");
            const modal2= document.getElementById("modal-content12");
            const cancelButton = document.getElementById("cancelButton6");
            const confirmButton = document.getElementById("confirmButton11");
            const confirmButton2 = document.getElementById("confirmButton12");
            const situationElement = document.querySelector(".dry-situation3 span");

            let isMachineBroken = false; // ê¸°ê¸°ê°€ ê³ ì¥ ìƒíƒœì¸ì§€ ì¶”ì 
            // ê¸°ê¸° ìƒíƒœ í™•ì¸ í•¨ìˆ˜
            async function checkMachineStatus() {
                try {
                    const response = await fetch("/reservation/status/203"); // ì„œë²„ì—ì„œ ê¸°ê¸° ìƒíƒœ í™•ì¸
                    if (!response.ok) {
                        throw new Error("ê¸°ê¸° ìƒíƒœë¥¼ ê°€ì ¸ì˜¤ëŠ” ì¤‘ ì˜¤ë¥˜ ë°œìƒ");
                    }
                    const status = await response.text(); // ê¸°ê¸° ìƒíƒœ í…ìŠ¤íŠ¸ ë°˜í™˜

                    // ê¸°ê¸° ìƒíƒœ ì²˜ë¦¬
                    if (status === "ê³ ì¥") {
                        situationElement.textContent = "ê³ ì¥";
                        situationElement.style.color = "#A500FF";
                        reserveButton.disabled = true; // ì˜ˆì•½ ë²„íŠ¼ ë¹„í™œì„±í™”
                        reserveButton.classList.add("disabled-button"); // ë¹„í™œì„±í™” ìŠ¤íƒ€ì¼ ì¶”ê°€
                        isMachineBroken = true; // ê³ ì¥ ìƒíƒœ ì„¤ì •
                    } else {
                        checkAndUpdateStatus()
                        isMachineBroken = false; // ê³ ì¥ ìƒíƒœ í•´ì œ
                    }
                } catch (error) {
                    console.error("ê¸°ê¸° ìƒíƒœ í™•ì¸ ì¤‘ ì˜¤ë¥˜ ë°œìƒ:", error);
                }
            }

            // ì˜ˆì•½ ìƒíƒœ í™•ì¸ í•¨ìˆ˜
            async function checkAndUpdateStatus() {
                if (isMachineBroken) {
                    // ê¸°ê¸°ê°€ ê³ ì¥ ìƒíƒœë¼ë©´ ì˜ˆì•½ ìƒíƒœë¥¼ ì—…ë°ì´íŠ¸í•˜ì§€ ì•ŠìŒ
                    return;
                }
                const reservationData = {
                    machineNo: document.querySelector(".í˜¸203 span").innerText.trim(), // ê¸°ê¸° ë²ˆí˜¸
                    reserveDate: document.getElementById("dryDatetimePicker").value.split(" ")[0], // ë‚ ì§œë§Œ
                    startTime: document.getElementById("dryTimeRangeDisplay").textContent.split("~")[0].trim(), // ì‹œì‘ ì‹œê°„
                    endTime: document.getElementById("dryTimeRangeDisplay").textContent.split("~")[1].trim(), // ì¢…ë£Œ ì‹œê°„
                };

                const response = await fetch("/reservation/checkStatus", {
                    method: "POST",
                    headers: { "Content-Type": "application/json" },
                    body: JSON.stringify(reservationData),
                });
                const data = await response.json();

                if (data.status === "ì˜ˆì•½ì¤‘") {
                    situationElement.textContent = "ì˜ˆì•½ì¤‘";
                    situationElement.style.color = "#FD3C3C"; // ë¹¨ê°„ìƒ‰ìœ¼ë¡œ ì„¤ì •
                    reserveButton.disabled = true; // ë²„íŠ¼ ë¹„í™œì„±í™”
                    reserveButton.classList.add("disabled-button"); // ë¹„í™œì„±í™” ìŠ¤íƒ€ì¼ ì¶”ê°€
                } else {
                    situationElement.textContent = "ì‚¬ìš©ê°€ëŠ¥";
                    situationElement.style.color = "#0062FF";
                    reserveButton.disabled = false;
                    reserveButton.classList.remove("disabled-button"); // ë¹„í™œì„±í™” ìŠ¤íƒ€ì¼ ì œê±°
                }
            }
            // Flatpickr ì‹œê°„ ë³€ê²½ ì´ë²¤íŠ¸ì— ì˜ˆì•½ ìƒíƒœ í™•ì¸ ì¶”ê°€
            document.getElementById("dryDatetimePicker").addEventListener("change", checkAndUpdateStatus);
            document.getElementById("dryTimeRangeDisplay").addEventListener("change", checkAndUpdateStatus);


            // ì˜ˆì•½ ì¢…ë£Œ ì‹œê°„ ì—…ë°ì´íŠ¸ (ì„œë²„ì— ì™„ë£Œ ìƒíƒœ ë³€ê²½ ìš”ì²­)
            async function updateReservationStatus() {
                if (isMachineBroken) {
                    // ê¸°ê¸°ê°€ ê³ ì¥ ìƒíƒœë¼ë©´ ì˜ˆì•½ ìƒíƒœë¥¼ ì—…ë°ì´íŠ¸í•˜ì§€ ì•ŠìŒ
                    return;
                }
                try {
                    await fetch("/reservation/updateStatus", {
                        method: "POST",
                        headers: { "Content-Type": "application/json" },
                    });
                    checkAndUpdateStatus(); // ì˜ˆì•½ ìƒíƒœ ë‹¤ì‹œ í™•ì¸
                } catch (error) {
                    console.error("Error:", error);
                }
            }
            // ì˜ˆì•½ ìƒíƒœì™€ ì¢…ë£Œ ì‹œê°„ ìë™ ì—…ë°ì´íŠ¸ (1ë¶„ë§ˆë‹¤ ì‹¤í–‰)
            setInterval(updateReservationStatus, 60000);

            // ì˜ˆì•½í•˜ê¸° ë²„íŠ¼ í´ë¦­ ì‹œ ëª¨ë‹¬ ì—´ê¸°
            reserveButton.addEventListener("click", () => {
                modal.style.display = "block"; // ëª¨ë‹¬ í‘œì‹œ
                modal1.style.display= "block";
                document.body.classList.add("no-scroll"); // ìŠ¤í¬ë¡¤ ë¹„í™œì„±í™”

                // ì‹œì‘ ì‹œê°„ê³¼ ì¢…ë£Œ ì‹œê°„ì„ ê°€ì ¸ì™€ì„œ ëª¨ë‹¬ì— í‘œì‹œ
                const timeRange = dryTimeRangeDisplay.textContent; // "ì‹œì‘ì‹œê°„ ~ ì¢…ë£Œì‹œê°„"
                document.getElementById("modalTimeDisplay6").textContent = `${timeRange}`;
            });

            // ì·¨ì†Œ ë²„íŠ¼ í´ë¦­ ì‹œ ëª¨ë‹¬ ë‹«ê¸°
            cancelButton.addEventListener("click", () => {
                modal.style.display = "none";
                modal1.style.display="none";
                document.body.classList.remove("no-scroll"); // ìŠ¤í¬ë¡¤ í™œì„±í™”
            });

            // í™•ì¸ ë²„íŠ¼ í´ë¦­ ì‹œ ì²˜ë¦¬
            confirmButton.addEventListener("click", () => {
                // ì˜ˆì•½ ì •ë³´ ìˆ˜ì§‘
                const reservationData = {
                    machineNo: document.querySelector(".í˜¸203 span").innerText.trim(), // ê¸°ê¸° ë²ˆí˜¸
                    reserveDate: document.getElementById("dryDatetimePicker").value.split(" ")[0], // ë‚ ì§œë§Œ
                    startTime: document.getElementById("dryTimeRangeDisplay").textContent.split("~")[0].trim(), // ì‹œì‘ ì‹œê°„
                    endTime: document.getElementById("dryTimeRangeDisplay").textContent.split("~")[1].trim(), // ì¢…ë£Œ ì‹œê°„
                    reserveOption: document.getElementById("drying-options3").value, // ì„¸íƒ ì˜µì…˜
                    reservePrice: parseInt(document.getElementById("dry-selected-option3").textContent.replace(/[^0-9]/g, ""), 10), // ìˆ«ìë§Œ
                };

                // ì„œë²„ì— ì „ì†¡
                fetch("/reservation/save", {
                    method: "POST",
                    headers: { "Content-Type": "application/json" },
                    body: JSON.stringify(reservationData),
                })
                    .then((response) => {
                        if (response.ok) {

                            document.getElementById("modal6").style.display = "block";
                            document.getElementById("modal-content12").style.display = "block";
                            checkAndUpdateStatus();
                        } else {
                            alert("ì˜ˆì•½ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.");
                        }
                    })
                    .catch((error) => console.error("Error:", error));
            });
            confirmButton2.addEventListener("click", () => {
                modal.style.display="none";
                modal2.style.display="none";
                document.body.classList.remove("no-scroll"); // ìŠ¤í¬ë¡¤ í™œì„±í™”
            })

            // ì™¸ë¶€ í´ë¦­ ì°¨ë‹¨ (ëª¨ë“  ëª¨ë‹¬)
            modal.addEventListener("click", (event) => {
                if (!event.target.closest(".modal-content") && !event.target.closest(".modal-content2")) {
                    event.stopPropagation(); // ì™¸ë¶€ í´ë¦­ ì°¨ë‹¨
                }
            });

            // ëª¨ë‹¬ ì™¸ë¶€ì˜ ë‹¤ë¥¸ ë²„íŠ¼ í´ë¦­ ì°¨ë‹¨
            document.addEventListener("click", function (event) {
                if (modal.style.display === "block") {
                    const isModalContent = event.target.closest(".modal-content") || event.target.closest(".modal-content2");
                    if (!isModalContent) {
                        event.stopPropagation();
                    }
                }
            }, true);
            checkMachineStatus();
        });

    </script>


</body>
</html>